<?xml version='1.0' encoding='UTF-8' ?>
<rss version='2.0' xmlns:dc='http://purl.org/dc/elements/1.1/' > 

<onEnter>
  showIdle();

  /* Chargement de la config */
  Config="./scripts/srjg/Jukebox.cfg";
  Etat = loadXMLFile(Config);
  if (Etat == null) {
    Config="/usr/local/etc/srjg/Jukebox.cfg";
    Etat = loadXMLFile(Config);
    if (Etat == null) {
      print("Impossible de lire le fichier cfg");
      Erreur=1;
      postMessage("return");
    }
  }
  print("Le fichier cfg est lu");

  /* Affectation des variables de la config */
  Jukebox_Path = getXMLText("Config", "Jukebox_Path");
  AllMovies_Path = getXMLText("Config", "AllMovies_Path");
  Background_Img = getXMLText("Config", "Background_Img");
  Type_Poster = getXMLText("Config", "Type_Poster");
  Type_Sheet = getXMLText("Config", "Type_Sheet");
  Skin = getXMLText("Config", "Skin");

  Skin_Path = Jukebox_Path+"/Skin/"+Skin;

  InfoSheet = "/tmp/Curent_Sheet.xml";                     /* indique quel InfoSheet a ete choisi dans le Jukebox.rss */
  Etat = loadXMLFile(InfoSheet);
  if (Etat == null) {
    print("Load InfoSheet fail ", InfoSheet);
  } else {
    Movie_sheet = getXMLText("movie", "sheet");
    Movie_file = getXMLText("movie", "file");
  }
</onEnter>

<mediaDisplay name='onePartView' 
itemBackgroundColor='0:0:0' 
backgroundColor='0:0:0' 
sideColorBottom='0:0:0' 
sideColorTop='0:0:0' 
sideTopHeightPC='0' 
sideBottomHeightPC='0' 
itemGap='0' 
itemGapXPC='0' 
itemGapYPC='0' 
itemWidthPC='9' 
itemHeightPC='5.7' 
itemBorderPC='0' 
rowCount='1' 
columnCount='1' 
itemPerPage='1' 
imageBorderPC='0' 
itemBorderColor='-1:-1:-1' 
itemImageWidthPC='0' 
itemImageHeightPC='0' 
itemXPC='100' 
itemYPC='100' 
centerHeightPC='100' 
showHeader='no' 
showDefaultInfo='no' 
idleImageWidthPC='9' 
idleImageHeightPC='16' 
>

<idleImage> image/POPUP_LOADING_01.png </idleImage> 
<idleImage> image/POPUP_LOADING_02.png </idleImage> 
<idleImage> image/POPUP_LOADING_03.png </idleImage> 
<idleImage> image/POPUP_LOADING_04.png </idleImage> 
<idleImage> image/POPUP_LOADING_05.png </idleImage> 
<idleImage> image/POPUP_LOADING_06.png </idleImage> 
<idleImage> image/POPUP_LOADING_07.png </idleImage> 
<idleImage> image/POPUP_LOADING_08.png </idleImage> 

<backgroundDisplay>
  <image offsetXPC='0' offsetYPC='0' widthPC='100' heightPC='100' >
    <script>
      Etat = readStringFromFile(Movie_sheet);
      if (Etat==null){
        Movie_Poster=Skin_Path+"/NoMovieinfo.bmp";
      } else {
        print(Movie_sheet);
      }
   </script>
  </image> 
</backgroundDisplay> 

<onUserInput>
  <script> 
    userInput = currentUserInput();
    if (userInput == "left") {"true"; } else if (userInput == "right") {"true"; }
    else if (userInput == "video_play" || userInput == "enter") {
      playItemURL(Movie_file, 10);
      "true";
    }
  </script> 
</onUserInput>

</mediaDisplay> 

<channel> 
  <title>Movies</title> 
  <link>
    <script>
      print("rss_file://"+Jukebox_Path+"/MovieInfo.rss");
    </script>
  </link>
  <item> 
    <title>Movies</title> 
  </item> 
</channel> 
</rss> 
