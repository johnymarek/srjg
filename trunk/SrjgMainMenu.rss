<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://purl.org/dc/elements/1.1/">

<onEnter>
    showIdle();
	Config = "/usr/local/etc/srjg.cfg";
    Config_ok = loadXMLFile(Config);
    
	if (Config_ok == null) {
		print("Load Config fail ", Config);
	}
    else {
        Config_itemSize = getXMLElementCount("Config");
	}
    
	if (Config_itemSize > 0) {
		Language = getXMLText("Config", "Lang");
		Jukebox_Path = getXMLText("Config", "Jukebox_Path");
		Jukebox_Size = getXMLText("Config", "Jukebox_Size");
		Movies_Path = getXMLText("Config", "Movies_Path");
		Movie_Filter = getXMLText("Config", "Movie_Filter");
		Port = getXMLText("Config", "Port");
		Recent_Max = getXMLText("Config", "Recent_Max");
     }
	 
	 srjgconf="/tmp/srjg.cfg";	
     tmpconfigArray=null;
     tmpconfigArray=pushBackStringArray(tmpconfigArray, "Language="+Language);
     tmpconfigArray=pushBackStringArray(tmpconfigArray, "Jukebox_Path="+Jukebox_Path);
     tmpconfigArray=pushBackStringArray(tmpconfigArray, "Movies_Path="+Movies_Path);
     tmpconfigArray=pushBackStringArray(tmpconfigArray, "Movie_Filter="+Movie_Filter);
     tmpconfigArray=pushBackStringArray(tmpconfigArray, "Port="+Port);
     tmpconfigArray=pushBackStringArray(tmpconfigArray, "Recent_Max="+Recent_Max);
     writeStringToFile(srjgconf, tmpconfigArray);
	 
	 langpath = Jukebox_Path + "lang/" + Language;
	 langfile = loadXMLFile(langpath);
	 if (langfile != null) {
		main_alpha = getXMLText("main", "alpha");
		main_genre = getXMLText("main", "genre");
		main_recent = getXMLText("main", "recent");
		main_select = getXMLText("main", "select");
		main_update = getXMLText("main", "update");
		main_notwatched = getXMLText("main", "notwatched");
		main_year = getXMLText("main", "year");
		main_search = getXMLText("main", "search");
	 }
</onEnter>



<mediaDisplay name="photoView" rowCount="7" columnCount="1" drawItemText="no" showHeader="no" showDefaultInfo="no" menuBorderColor="255:255:255" sideColorBottom="-1:-1:-1" sideColorTop="-1:-1:-1" itemAlignt="left" itemOffsetXPC="24" itemOffsetYPC="30" itemWidthPC="25" itemHeightPC="7.2" backgroundColor="-1:-1:-1" itemBackgroundColor="-1:-1:-1" sliding="no" itemGap="0" idleImageXPC="90" idleImageYPC="5" idleImageWidthPC="5" idleImageHeightPC="8" imageUnFocus="null" imageParentFocus="null" imageBorderPC="0" forceFocusOnItem="no" cornerRounding="yes" itemBorderColor="-1:-1:-1" focusBorderColor="-1:-1:-1" unFocusBorderColor="-1:-1:-1">
<idleImage> image/POPUP_LOADING_01.png </idleImage> 
<idleImage> image/POPUP_LOADING_02.png </idleImage> 
<idleImage> image/POPUP_LOADING_03.png </idleImage> 
<idleImage> image/POPUP_LOADING_04.png </idleImage> 
<idleImage> image/POPUP_LOADING_05.png </idleImage> 
<idleImage> image/POPUP_LOADING_06.png </idleImage> 
<idleImage> image/POPUP_LOADING_07.png </idleImage> 
<idleImage> image/POPUP_LOADING_08.png </idleImage> 

<text redraw="no" backgroundColor="-1:-1:-1" foregroundColor="200:200:200" offsetXPC="5" offsetYPC="27" widthPC="19" heightPC="14" fontSize="16" lines="1" align="right">
	<script>
		print(main_select);
	</script>
</text>

<onUserInput>
    <script>
	userInput = currentUserInput();
	
	if (userInput == "enter") {
     indx=getFocusItemIndex();
	   mode=getItemInfo(indx, "selection");		/* getItemInfo(-1, "selection"); don't work with the last item */
	   if ( mode == "moviesearch") {
		inputMovie=getInput("doModal");
		if (inputMovie != NULL) {
		   SelTitle = inputMovie;
		}
	   }
           else {
		SelTitle=getItemInfo(-1, "title"); }
	  SelTitle=urlEncode(SelTitle);	
          mode=urlEncode(mode);
          jumpToLink("SelectionEntered");
          "false";
       }
     </script>
</onUserInput>

 
<itemDisplay>

<image offsetXPC="0" offsetYPC="0" widthPC="100" heightPC="100">
 <script>
  if (getDrawingItemState() == "focus")
  {
      print(Jukebox_Path + "images/focus_on.png");
  }
 else
  {
      print(Jukebox_Path + "images/focus_off.png");
  }
 </script>
</image>

<text redraw="no" offsetXPC="0" offsetYPC="0" widthPC="94" heightPC="100" backgroundColor="-1:-1:-1" foregroundColor="200:200:200" fontSize="16" align="center">
 <script>
    getItemInfo(-1, "title");
 </script>
</text>
</itemDisplay>  

   <backgroundDisplay>
        <image redraw="no" offsetXPC="0" offsetYPC="0" widthPC="100" heightPC="100">
	     <script>
                 print(Jukebox_Path + "images/srjgMainMenu.jpg");
             </script>
        </image>
    </backgroundDisplay> 

</mediaDisplay>

<SelectionEntered>
    <link>
       <script>
           print("http://127.0.0.1:"+Port+"/cgi-bin/srjg.cgi?"+mode+"@"+SelTitle+"@"+Jukebox_Size);
       </script>
    </link>
</SelectionEntered>

<channel>
<title>Main menu</title>

<item>
<title>
	<script>
		print(main_genre);
	</script>
</title>
<selection>genreSelection</selection>
</item>

<item>
<title>
	<script>
		print(main_year);
	</script>
</title>
<selection>yearSelection</selection>
</item>

<item>
<title>
	<script>
		print(main_alpha);
	</script>
</title>
<selection>alphaSelection</selection>
</item>

<item>
<title>
	<script>
		print(main_recent);
	</script>
</title>
<selection>recent</selection>
</item>

<item>
<title>
	<script>
		print(main_notwatched);
	</script>
</title>
<selection>notwatched</selection>
</item>

<item>
<title>
	<script>
		print(main_search);
	</script>
</title>
<selection>moviesearch</selection>
</item>

<item>
<title>
	<script>
		print(main_update);
	</script>
</title>
<selection>Update</selection>
</item>

</channel>
</rss>
